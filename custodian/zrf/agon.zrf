(define queen-step (
  $1 (verify empty?)
  add
))

(define guard-step (
  $1 (verify empty?)
  (verify (not-in-zone? center))
  add
))

(define drop (
  (verify not-empty?)
  c1 (while (on-board? $1) (if empty? add) $1)
  (verify empty?)
  add
))

(game
  (title "Agon")
  (description "http://www.kruzno.com/Agon.html")

  (move-sound "Audio\Pickup.wav")
  (release-sound "Audio\Pickup.wav")
  (capture-sound "")
  (drop-sound "")

  (option "animate captures"     false)
  (option "smart moves"          false)
  (option "pass turn"            forced)

  (players White Black)
  (turn-order White Black)
  (move-priorities drop-type normal-type)

  (board
     (image "images/agon/board.bmp")
;    (grid
;        (start-rectangle 10 34 70 94)
;        (dimensions
;          ("a/b/c/d/e/f" (105 0)) ; files
;          ("20/18/16/14/12/10/8/6/4/2" (0 61)) ; ranks
;        )
;    )
;    (grid
;        (start-rectangle 62 4 122 64)
;        (dimensions
;          ("a/b/c/d/e" (105 0)) ; files
;          ("21/19/17/15/13/11/9/7/5/3/1" (0 61)) ; ranks
;        )
;    )
     (positions
             (a16  10 156  70 216)
             (a14  10 217  70 277)
             (a12  10 278  70 338)
             (a10  10 339  70 399)
             (a8  10 400  70 460)
             (a6  10 461  70 521)
             (b18 115  95 175 155)
             (b16 115 156 175 216)
             (b14 115 217 175 277)
             (b12 115 278 175 338)
             (b10 115 339 175 399)
             (b8 115 400 175 460)
             (b6 115 461 175 521)
             (b4 115 522 175 582)
             (c20 220  34 280  94)
             (c18 220  95 280 155)
             (c16 220 156 280 216)
             (c14 220 217 280 277)
             (c12 220 278 280 338)
             (c10 220 339 280 399)
             (c8 220 400 280 460)
             (c6 220 461 280 521)
             (c4 220 522 280 582)
             (c2 220 583 280 643)
             (d20 325  34 385  94)
             (d18 325  95 385 155)
             (d16 325 156 385 216)
             (d14 325 217 385 277)
             (d12 325 278 385 338)
             (d10 325 339 385 399)
             (d8 325 400 385 460)
             (d6 325 461 385 521)
             (d4 325 522 385 582)
             (d2 325 583 385 643)
             (e18 430  95 490 155)
             (e16 430 156 490 216)
             (e14 430 217 490 277)
             (e12 430 278 490 338)
             (e10 430 339 490 399)
             (e8 430 400 490 460)
             (e6 430 461 490 521)
             (e4 430 522 490 582)
             (f16 535 156 595 216)
             (f14 535 217 595 277)
             (f12 535 278 595 338)
             (f10 535 339 595 399)
             (f8 535 400 595 460)
             (f6 535 461 595 521)

             (a17  62 126 122 186)
             (a15  62 187 122 247)
             (a13  62 248 122 308)
             (a11  62 309 122 369)
             (a9  62 370 122 430)
             (a7  62 431 122 491)
             (a5  62 492 122 552)
             (b19 167  65 227 125)
             (b17 167 126 227 186)
             (b15 167 187 227 247)
             (b13 167 248 227 308)
             (b11 167 309 227 369)
             (b9 167 370 227 430)
             (b7 167 431 227 491)
             (b5 167 492 227 552)
             (b3 167 553 227 613)
             (c21 272   4 332  64)
             (c19 272  65 332 125)
             (c17 272 126 332 186)
             (c15 272 187 332 247)
             (c13 272 248 332 308)
             (c11 272 309 332 369)
             (c9 272 370 332 430)
             (c7 272 431 332 491)
             (c5 272 492 332 552)
             (c3 272 553 332 613)
             (c1 272 614 332 674)
             (d19 377  65 437 125)
             (d17 377 126 437 186)
             (d15 377 187 437 247)
             (d13 377 248 437 308)
             (d11 377 309 437 369)
             (d9 377 370 437 430)
             (d7 377 431 437 491)
             (d5 377 492 437 552)
             (d3 377 553 437 613)
             (e17 482 126 542 186)
             (e15 482 187 542 247)
             (e13 482 248 542 308)
             (e11 482 309 542 369)
             (e9 482 370 542 430)
             (e7 482 431 542 491)
             (e5 482 492 542 552)
     )
     (links next
             (c1 c2) (c2 b3) (b3 b4) (b4 a5) (a5 a6) (a6 a8) (a8 a10) (a10 a12)
             (a12 a14) (a14 a16) (a16 a17) (a17 b18) (b18 b19) (b19 c20) (c20 c21)
             (c21 d20) (d20 d19) (d19 e18) (e18 e17) (e17 f16) (f16 f14) (f14 f12)
             (f12 f10) (f10 f8) (f8 f6) (f6 e5) (e5 e4) (e4 d3) (d3 d2)
     )
     (links w
             (c1 c2) (c2 b3) (b3 b4) (b4 a5) (a5 a6) (a6 a8) (a8 a10) (a10 a12)
             (a12 a14) (a14 a16) (a16 a17) (a17 b18) (b18 b19) (b19 c20) (c20 c21)
             (c21 d20) (d20 d19) (d19 e18) (e18 e17) (e17 f16) (f16 f14) (f14 f12)
             (f12 f10) (f10 f8) (f8 f6) (f6 e5) (e5 e4) (e4 d3) (d3 d2) (d2 c1)
             (c3 c4) (c4 b5) (b5 b6) (b6 a7) (a7 a9) (a9 a11) (a11 a13) (a13 a15)
             (a15 b16) (b16 b17) (b17 c18) (c18 c19) (c19 d18) (d18 d17) (d17 e16)
             (e16 e15) (e15 e13) (e13 e11) (e11 e9) (e9 e7) (e7 e6) (e6 d5) (d5 d4)
             (d4 c3) (c5 c6) (c6 b7) (b7 b8) (b8 b10) (b10 b12) (b12 b14) (b14 b15)
             (b15 c16) (c16 c17) (c17 d16) (d16 d15) (d15 e14) (e14 e12) (e12 e10)
             (e10 e8) (e8 d7) (d7 d6) (d6 c5) (c7 c8) (c8 b9) (b9 b11) (b11 b13)
             (b13 c14) (c14 c15) (c15 d14) (d14 d13) (d13 d11) (d11 d9) (d9 d8)
             (d8 c7) (c9 c10) (c10 c12) (c12 c13) (c13 d12) (d12 d10) (d10 c9)
     )
     (links e
             (c2 c1) (b3 c2) (b4 b3) (a5 b4) (a6 a5) (a8 a6) (a10 a8) (a12 a10)
             (a14 a12) (a16 a14) (a17 a16) (b18 a17) (b19 b18) (c20 b19) (c21 c20)
             (d20 c21) (d19 d20) (e18 d19) (e17 e18) (f16 e17) (f14 f16) (f12 f14)
             (f10 f12) (f8 f10) (f6 f8) (e5 f6) (e4 e5) (d3 e4) (d2 d3) (c1 d2)
             (c4 c3) (b5 c4) (b6 b5) (a7 b6) (a9 a7) (a11 a9) (a13 a11) (a15 a13)
             (b16 a15) (b17 b16) (c18 b17) (c19 c18) (d18 c19) (d17 d18) (e16 d17)
             (e15 e16) (e13 e15) (e11 e13) (e9 e11) (e7 e9) (e6 e7) (d5 e6) (d4 d5)
             (c3 d4) (c6 c5) (b7 c6) (b8 b7) (b10 b8) (b12 b10) (b14 b12) (b15 b14)
             (c16 b15) (c17 c16) (d16 c17) (d15 d16) (e14 d15) (e12 e14) (e10 e12)
             (e8 e10) (d7 e8) (d6 d7) (c5 d6) (c8 c7) (b9 c8) (b11 b9) (b13 b11)
             (c14 b13) (c15 c14) (d14 c15) (d13 d14) (d11 d13) (d9 d11) (d8 d9)
             (c7 d8) (c10 c9) (c12 c10) (c13 c12) (d12 c13) (d10 d12) (c9 d10)
     )
     (links n
            (c1 c3) (c3 c5) (c5 c7) (c7 c9) (c9 c11) (a6 a7) (a7 b8) (b8 b9) (b9 c10)
            (c10 c11) (a16 a15) (a15 b14) (b14 b13) (b13 c12) (c12 c11) (c21 c19)
            (c19 c17) (c17 c15) (c15 c13) (c13 c11) (f16 e15) (e15 e14) (e14 d13)
            (d13 d12) (d12 c11) (f6 e7) (e7 e8) (e8 d9) (d9 d10) (d10 c11)
     )
     (links nw
            (c2 c4) (b3 b5) (b4 b6) (a5 a7) (a8 a9) (a10 a11) (a12 a13) (a14 a15)
            (a17 b16) (b18 b17) (b19 c18) (c20 c19) (d20 d18) (d19 d17) (e18 e16)
            (e17 e15) (f14 e13) (f12 e11) (f10 e9) (f8 e7) (e5 e6) (e4 d5) (d3 d4)
            (d2 c3) (c4 c6) (b5 b7) (b6 b8) (a9 b10) (a11 b12) (a13 b14) (b16 b15)
            (b17 c16) (c18 c17) (d18 d16) (d17 d15) (e16 e14) (e13 e12) (e11 e10)
            (e9 e8) (e6 d7) (d5 d6) (d4 c5) (c6 c8) (b7 b9) (b10 b11) (b12 b13)
            (b15 c14) (c16 c15) (d16 d14) (d15 d13) (e12 d11) (e10 d9) (d7 d8)
            (d6 c7) (c8 c10) (b11 c12) (c14 c13) (d14 d12) (d11 d10) (d8 c9)
     )
     (links ne
           (c2 c3) (b3 c4) (b4 b5) (a5 b6) (a8 a7) (a10 a9) (a12 a11) (a14 a13)
           (a17 a15) (b18 b16) (b19 b17) (c20 c18) (d20 c19) (d19 d18) (e18 d17)
           (e17 e16) (f14 e15) (f12 e13) (f10 e11) (f8 e9) (e5 e7) (e4 e6) (d3 d5)
           (d2 d4) (c4 c5) (b5 c6) (b6 b7) (a9 b8) (a11 b10) (a13 b12) (b16 b14)
           (b17 b15) (c18 c16) (d18 c17) (d17 d16) (e16 d15) (e13 e14) (e11 e12)
           (e9 e10) (e6 e8) (d5 d7) (d4 d6) (c6 c7) (b7 c8) (b10 b9) (b12 b11) 
           (b15 b13) (c16 c14) (d16 c15) (d15 d14) (e12 d13) (e10 d11) (d7 d9)
           (d6 d8) (c8 c9) (b11 c10) (c14 c12) (d14 c13) (d11 d12) (d8 d10)
     )
     (links cn
           (a6 a8) (a8 a10) (a10 a12) (a12 a14) (a14 a16) (a5 a7) (a7 a9) (a9 a11)
           (a11 a13) (a13 a15) (a15 a17) (b4 b6) (b6 b8) (b8 b10) (b10 b12) (b12 b14)
           (b14 b16) (b16 b18) (b3 b5) (b5 b7) (b7 b9) (b9 b11) (b11 b13) (b13 b15)
           (b15 b17) (b17 b19) (c2 c4) (c4 c6) (c6 c8) (c8 c10) (c10 c12) (c12 c14)
           (c14 c16) (c16 c18) (c18 c20) (c1 c3) (c3 c5) (c5 c7) (c7 c9) (c9 c11)
           (c11 c13) (c13 c15) (c15 c17) (c17 c19) (c19 c21) (d2 d4) (d4 d6) (d6 d8)
           (d8 d10) (d10 d12) (d12 d14) (d14 d16) (d16 d18) (d18 d20) (d3 d5) (d5 d7)
           (d7 d9) (d9 d11) (d11 d13) (d13 d15) (d15 d17) (d17 d19) (e4 e6) (e6 e8)
           (e8 e10) (e10 e12) (e12 e14) (e14 e16) (e16 e18) (e5 e7) (e7 e9) (e9 e11)
           (e11 e13) (e13 e15) (e15 e17) (f6 f8) (f8 f10) (f10 f12) (f12 f14) (f14 f16)
     )
     (links cs
           (a8 a6) (a10 a8) (a12 a10) (a14 a12) (a16 a14) (a7 a5) (a9 a7) (a11 a9)
           (a13 a11) (a15 a13) (a17 a15) (b6 b4) (b8 b6) (b10 b8) (b12 b10) (b14 b12)
           (b16 b14) (b18 b16) (b5 b3) (b7 b5) (b9 b7) (b11 b9) (b13 b11) (b15 b13)
           (b17 b15) (b19 b17) (c4 c2) (c6 c4) (c8 c6) (c10 c8) (c12 c10) (c14 c12)
           (c16 c14) (c18 c16) (c20 c18) (c3 c1) (c5 c3) (c7 c5) (c9 c7) (c11 c9)
           (c13 c11) (c15 c13) (c17 c15) (c19 c17) (c21 c19) (d4 d2) (d6 d4) (d8 d6)
           (d10 d8) (d12 d10) (d14 d12) (d16 d14) (d18 d16) (d20 d18) (d5 d3) (d7 d5)
           (d9 d7) (d11 d9) (d13 d11) (d15 d13) (d17 d15) (d19 d17) (e6 e4) (e8 e6)
           (e10 e8) (e12 e10) (e14 e12) (e16 e14) (e18 e16) (e7 e5) (e9 e7) (e11 e9)
           (e13 e11) (e15 e13) (e17 e15) (f8 f6) (f10 f8) (f12 f10) (f14 f12) (f16 f14)
     )
     (links cne
           (a16 a17) (a17 b18) (b18 b19) (b19 c20) (c20 c21) (a14 a15) (a15 b16)
           (b16 b17) (b17 c18) (c18 c19) (c19 d20) (a12 a13) (a13 b14) (b14 b15)
           (b15 c16) (c16 c17) (c17 d18) (d18 d19) (a10 a11) (a11 b12) (b12 b13)
           (b13 c14) (c14 c15) (c15 d16) (d16 d17) (d17 e18) (a8 a9) (a9 b10) (b10 b11)
           (b11 c12) (c12 c13) (c13 d14) (d14 d15) (d15 e16) (e16 e17) (a6 a7) (a7 b8)
           (b8 b9) (b9 c10) (c10 c11) (c11 d12) (d12 d13) (d13 e14) (e14 e15) (e15 f16)
           (a5 b6) (b6 b7) (b7 c8) (c8 c9) (c9 d10) (d10 d11) (d11 e12) (e12 e13)
           (e13 f14) (b4 b5) (b5 c6) (c6 c7) (c7 d8) (d8 d9) (d9 e10) (e10 e11) (e11 f12)
           (b3 c4) (c4 c5) (c5 d6) (d6 d7) (d7 e8) (e8 e9) (e9 f10) (c2 c3) (c3 d4)
           (d4 d5) (d5 e6) (e6 e7) (e7 f8) (c1 d2) (d2 d3) (d3 e4) (e4 e5) (e5 f6)
     )
     (links csw
           (a17 a16) (b18 a17) (b19 b18) (c20 b19) (c21 c20) (a15 a14) (b16 a15)
           (b17 b16) (c18 b17) (c19 c18) (d20 c19) (a13 a12) (b14 a13) (b15 b14)
           (c16 b15) (c17 c16) (d18 c17) (d19 d18) (a11 a10) (b12 a11) (b13 b12)
           (c14 b13) (c15 c14) (d16 c15) (d17 d16) (e18 d17) (a9 a8) (b10 a9) (b11 b10)
           (c12 b11) (c13 c12) (d14 c13) (d15 d14) (e16 d15) (e17 e16) (a7 a6) (b8 a7)
           (b9 b8) (c10 b9) (c11 c10) (d12 c11) (d13 d12) (e14 d13) (e15 e14) (f16 e15)
           (b6 a5) (b7 b6) (c8 b7) (c9 c8) (d10 c9) (d11 d10) (e12 d11) (e13 e12)
           (f14 e13) (b5 b4) (c6 b5) (c7 c6) (d8 c7) (d9 d8) (e10 d9) (e11 e10) (f12 e11)
           (c4 b3) (c5 c4) (d6 c5) (d7 d6) (e8 d7) (e9 e8) (f10 e9) (c3 c2) (d4 c3)
           (d5 d4) (e6 d5) (e7 e6) (f8 e7) (d2 c1) (d3 d2) (e4 d3) (e5 e4) (f6 e5)
     )
     (links cnw
           (c1 c2) (c2 b3) (b3 b4) (b4 a5) (a5 a6) (d2 c3) (c3 c4) (c4 b5) (b5 b6)
           (b6 a7) (a7 a8) (d3 d4) (d4 c5) (c5 c6) (c6 b7) (b7 b8) (b8 a9) (a9 a10)
           (e4 d5) (d5 d6) (d6 c7) (c7 c8) (c8 b9) (b9 b10) (b10 a11) (a11 a12) (e5 e6)
           (e6 d7) (d7 d8) (d8 c9) (c9 c10) (c10 b11) (b11 b12) (b12 a13) (a13 a14)
           (f6 e7) (e7 e8) (e8 d9) (d9 d10) (d10 c11) (c11 c12) (c12 b13) (b13 b14)
           (b14 a15) (a15 a16) (f8 e9) (e9 e10) (e10 d11) (d11 d12) (d12 c13) (c13 c14)
           (c14 b15) (b15 b16) (b16 a17) (f10 e11) (e11 e12) (e12 d13) (d13 d14) (d14 c15)
           (c15 c16) (c16 b17) (b17 b18) (f12 e13) (e13 e14) (e14 d15) (d15 d16) (d16 c17)
           (c17 c18) (c18 b19) (f14 e15) (e15 e16) (e16 d17) (d17 d18) (d18 c19) (c19 c20)
           (f16 e17) (e17 e18) (e18 d19) (d19 d20) (d20 c21)
     )
     (links cse
           (c2 c1) (b3 c2) (b4 b3) (a5 b4) (a6 a5) (c3 d2) (c4 c3) (b5 c4) (b6 b5)
           (a7 b6) (a8 a7) (d4 d3) (c5 d4) (c6 c5) (b7 c6) (b8 b7) (a9 b8) (a10 a9)
           (d5 e4) (d6 d5) (c7 d6) (c8 c7) (b9 c8) (b10 b9) (a11 b10) (a12 a11) (e6 e5)
           (d7 e6) (d8 d7) (c9 d8) (c10 c9) (b11 c10) (b12 b11) (a13 b12) (a14 a13)
           (e7 f6) (e8 e7) (d9 e8) (d10 d9) (c11 d10) (c12 c11) (b13 c12) (b14 b13)
           (a15 b14) (a16 a15) (e9 f8) (e10 e9) (d11 e10) (d12 d11) (c13 d12) (c14 c13)
           (b15 c14) (b16 b15) (a17 b16) (e11 f10) (e12 e11) (d13 e12) (d14 d13) (c15 d14)
           (c16 c15) (b17 c16) (b18 b17) (e13 f12) (e14 e13) (d15 e14) (d16 d15) (c17 d16)
           (c18 c17) (b19 c18) (e15 f14) (e16 e15) (d17 e16) (d18 d17) (c19 d18) (c20 c19)
           (e17 f16) (e18 e17) (d19 e18) (d20 d19) (c21 d20)
     )
     (zone (name center)  
         (players White Black) 
         (positions c11)
     )
     (zone (name guards)  
         (players White Black) 
         (positions c9 c10 c12 c13 d12 d10)
     )
  )

  (piece
     (name Queen)
     (image White "images/agon/wqueen.bmp"
            Black "images/agon/bqueen.bmp")
     (moves
         (move-type normal-type)
         (queen-step n) (queen-step w) (queen-step e)
         (queen-step nw) (queen-step ne)
     )
  )
  (piece
     (name QueenCaptured)
     (image White "images/agon/bqueen.bmp"
            Black "images/agon/wqueen.bmp")
     (moves
         (move-type drop-type)
         (drop next)
     )
  )
  (piece
     (name Guard)
     (image White "images/agon/wsoldier.bmp"
            Black "images/agon/bsoldier.bmp")
     (moves
         (move-type normal-type)
         (guard-step n) (guard-step w) (guard-step e)
         (guard-step nw) (guard-step ne)
     )
  )
  (piece
     (name GuardCaptured)
     (image White "images/agon/wsoldier.bmp"
            Black "images/agon/bsoldier.bmp")
     (moves
         (move-type drop-type)
         (drop next)
     )
  )

  (board-setup
    (White (Guard a5 f6 a12 f14 b19 d19) (Queen c1))
    (Black (Guard b3 d3 a8 f10 a16 e17) (Queen c21))
  )
)
